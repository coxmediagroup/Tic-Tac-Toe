board = list('123456789')
wins = ((1,2,3), (4,5,6), (7,8,9),

        (1,5,9), (3,5,7), (1,4,7),
        (2,5,8), (3,6,9))

 
def printBoard():
    print('\n-+-+-\n'.join('|'.join(board[x:x+3]) for x in(0,3,6)))

 
def score(board=board):
    for w in wins:
        b = board[w[0]]

        if b in 'XO' and all (board[i] == b for i in w):

            return b, [i+1 for i in w]
    return None

 
def finished():
    return all (b in 'XO' for b in board)

 
def space(board=board):
    return [ b for b in board if b not in 'XO']

 
def myTurn(xo, board):
    options = space()
    choice = random.choice(options)

    board[int(choice)-1] = xo
    return choice

 
def compBetterTurn(xo, board):
    'Will return a next winning move or block your winning move if possible'

    ox = 'O' if xo =='X' else 'X'
    oneBlock = None

    options  = [int(s)-1 for s in space(board)]

    for choice in options:
        brd = board[:]
        brd[choice] = xo

        if score(brd):
            break
        if oneBlock is None:

            brd[choice] = ox
            if score(brd):
                oneBlock = choice

    else:
        choice = oneBlock if oneBlock is not None else random.choice(options)

    board[choice] = xo
    return choice+1
 
def your_turn(xo, board):

    options = space()
    while True:
        choice = input("\nPut your %s in one of these positions: %s "

                       % (xo, ''.join(options))).strip()

        if choice in options:
            break
        print( "That's an invalid input. Try again." )

    board[int(choice)-1] = xo
    return choice

 
def me(xo='X'):
    printBoard()
    print('\nComputer played at', compBetterTurn(xo, board))

    return score()
 
def you(xo='O'):

    printBoard()
    # Call myTurn(xo, board) below for it to play itself
    print('\nYou played at', yourTurn(xo, board))

    return score()
 
 
print(__doc__)
while not finished():

    s = me('X')
    if s:
        printBoard()
        print("\n%s wins: %s" % s)

        break
    if not finished():
        s = you('O')

        if s:
            printBoard()
            print("\n%s wins: %s" % s)

            break
else:
    print('\nA draw')
